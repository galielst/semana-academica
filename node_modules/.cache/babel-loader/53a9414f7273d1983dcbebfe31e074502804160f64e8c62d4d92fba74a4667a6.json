{"ast":null,"code":"import{useEffect,useState}from\"react\";import{supabase}from\"../../supabaseClient\";import Label from\"../ui/Label\";import Select from\"../ui/Select\";import dayjs from\"dayjs\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EventRegistrantsPanel(){const[eventId,setEventId]=useState(\"\");const[items,setItems]=useState([]);const[events,setEvents]=useState([]);useEffect(()=>{(async()=>{const{data}=await supabase.from(\"events\").select(\"id,title\").order(\"starts_at\");setEvents(data||[]);})();},[]);useEffect(()=>{if(eventId)fetchRegs(eventId);},[eventId]);async function fetchRegs(id){const{data}=await supabase.from(\"registrations_admin_view\").select(\"id, event_id, user_email, full_name, phone, checked_in_at, title\").eq(\"event_id\",id).order(\"checked_in_at\",{ascending:false});setItems(data||[]);}return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(Label,{children:\"Ver inscritos por evento\"}),/*#__PURE__*/_jsxs(Select,{value:eventId,onChange:e=>setEventId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona evento\\u2026\"}),events.map(e=>/*#__PURE__*/_jsx(\"option\",{value:e.id,children:e.title},e.id))]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,maxHeight:300,overflow:\"auto\",border:\"1px solid #e5e7eb\",borderRadius:12},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",fontSize:13},children:[/*#__PURE__*/_jsx(\"thead\",{style:{position:\"sticky\",top:0,background:\"#f9fafb\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"left\",padding:8},children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"left\",padding:8},children:\"Correo\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"left\",padding:8},children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"left\",padding:8},children:\"Check-in\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[items.map(r=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderTop:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:r.full_name||\"—\"}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:r.user_email}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:r.phone||\"—\"}),/*#__PURE__*/_jsx(\"td\",{style:{padding:8},children:r.checked_in_at?dayjs(r.checked_in_at).format(\"DD/MM HH:mm\"):\"Pendiente\"})]},r.id)),items.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:4,style:{padding:12,textAlign:\"center\",color:\"#6b7280\"},children:\"Sin inscritos\"})})]})]})})]});}","map":{"version":3,"names":["useEffect","useState","supabase","Label","Select","dayjs","jsx","_jsx","jsxs","_jsxs","EventRegistrantsPanel","eventId","setEventId","items","setItems","events","setEvents","data","from","select","order","fetchRegs","id","eq","ascending","style","marginTop","children","value","onChange","e","target","map","title","maxHeight","overflow","border","borderRadius","width","fontSize","position","top","background","textAlign","padding","r","borderTop","full_name","user_email","phone","checked_in_at","format","length","colSpan","color"],"sources":["C:/Users/Home/Documents/registro-de-eventos/src/components/Admin/EventRegistrantsPanel.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { supabase } from \"../../supabaseClient\";\r\nimport Label from \"../ui/Label\";\r\nimport Select from \"../ui/Select\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default function EventRegistrantsPanel(){\r\n  const [eventId, setEventId] = useState(\"\");\r\n  const [items, setItems] = useState([]);\r\n  const [events, setEvents] = useState([]);\r\n\r\n  useEffect(()=>{ (async()=>{\r\n    const { data } = await supabase.from(\"events\").select(\"id,title\").order(\"starts_at\");\r\n    setEvents(data||[]);\r\n  })(); },[]);\r\n\r\n  useEffect(()=>{ if(eventId) fetchRegs(eventId); },[eventId]);\r\n\r\n  async function fetchRegs(id){\r\n    const { data } = await supabase\r\n      .from(\"registrations_admin_view\")\r\n      .select(\"id, event_id, user_email, full_name, phone, checked_in_at, title\")\r\n      .eq(\"event_id\", id)\r\n      .order(\"checked_in_at\", { ascending: false });\r\n    setItems(data||[]);\r\n  }\r\n\r\n  return (\r\n    <div style={{marginTop:12}}>\r\n      <Label>Ver inscritos por evento</Label>\r\n      <Select value={eventId} onChange={(e)=>setEventId(e.target.value)}>\r\n        <option value=\"\">Selecciona evento…</option>\r\n        {events.map(e=> <option key={e.id} value={e.id}>{e.title}</option>)}\r\n      </Select>\r\n      <div style={{marginTop:8, maxHeight:300, overflow:\"auto\", border:\"1px solid #e5e7eb\", borderRadius:12}}>\r\n        <table style={{width:\"100%\", fontSize:13}}>\r\n          <thead style={{position:\"sticky\", top:0, background:\"#f9fafb\"}}>\r\n            <tr>\r\n              <th style={{textAlign:\"left\", padding:8}}>Nombre</th>\r\n              <th style={{textAlign:\"left\", padding:8}}>Correo</th>\r\n              <th style={{textAlign:\"left\", padding:8}}>Teléfono</th>\r\n              <th style={{textAlign:\"left\", padding:8}}>Check-in</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map(r=> (\r\n              <tr key={r.id} style={{borderTop:\"1px solid #e5e7eb\"}}>\r\n                <td style={{padding:8}}>{r.full_name||\"—\"}</td>\r\n                <td style={{padding:8}}>{r.user_email}</td>\r\n                <td style={{padding:8}}>{r.phone||\"—\"}</td>\r\n                <td style={{padding:8}}>{r.checked_in_at? dayjs(r.checked_in_at).format(\"DD/MM HH:mm\"): \"Pendiente\"}</td>\r\n              </tr>\r\n            ))}\r\n            {items.length===0 && (\r\n              <tr><td colSpan={4} style={{padding:12, textAlign:\"center\", color:\"#6b7280\"}}>Sin inscritos</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}