{"ast":null,"code":"import{useEffect,useState}from\"react\";import{supabase}from\"../../supabaseClient\";import dayjs from\"dayjs\";import QRItem from\"./QRItem\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MisRegistros(_ref){let{refreshFlag}=_ref;const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);async function fetchRegistros(){const{data:{user}}=await supabase.auth.getUser();const{data,error}=await supabase.from(\"registrations_view\").select(\"id,event_id,title,type,starts_at\").eq(\"user_id\",user.id).order(\"starts_at\",{ascending:true});setLoading(false);if(!error)setItems(data||[]);}useEffect(()=>{fetchRegistros();},[refreshFlag]);// ðŸ‘ˆ se recarga cuando cambia refreshFlag\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:16,fontWeight:700,marginBottom:8},children:\"Mis registros / QR\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Cargando...\"}):/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:12},children:[items.map(it=>/*#__PURE__*/_jsx(QRItem,{reg:it},it.id)),items.length===0&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"#6b7280\"},children:\"A\\xFAn no te has inscrito.\"})]})]});}","map":{"version":3,"names":["useEffect","useState","supabase","dayjs","QRItem","jsx","_jsx","jsxs","_jsxs","MisRegistros","_ref","refreshFlag","items","setItems","loading","setLoading","fetchRegistros","data","user","auth","getUser","error","from","select","eq","id","order","ascending","children","style","fontSize","fontWeight","marginBottom","display","gap","map","it","reg","length","color"],"sources":["C:/Users/Home/Documents/registro-de-eventos/src/components/Alumno/MisRegistros.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { supabase } from \"../../supabaseClient\";\r\nimport dayjs from \"dayjs\";\r\nimport QRItem from \"./QRItem\";\r\n\r\nexport default function MisRegistros({ refreshFlag }) {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  async function fetchRegistros() {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    const { data, error } = await supabase\r\n      .from(\"registrations_view\")\r\n      .select(\"id,event_id,title,type,starts_at\")\r\n      .eq(\"user_id\", user.id)\r\n      .order(\"starts_at\", { ascending: true });\r\n    setLoading(false);\r\n    if (!error) setItems(data || []);\r\n  }\r\n\r\n  useEffect(() => { fetchRegistros(); }, [refreshFlag]); // ðŸ‘ˆ se recarga cuando cambia refreshFlag\r\n\r\n  return (\r\n    <div>\r\n      <h3 style={{ fontSize:16, fontWeight:700, marginBottom:8 }}>Mis registros / QR</h3>\r\n      {loading? <p>Cargando...</p> : (\r\n        <div style={{display:\"grid\", gap:12}}>\r\n          {items.map(it => (<QRItem key={it.id} reg={it} />))}\r\n          {items.length===0 && <p style={{color:\"#6b7280\"}}>AÃºn no te has inscrito.</p>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,QAAQ,KAAQ,sBAAsB,CAC/C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,cAAe,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAkB,IAAjB,CAAEC,WAAY,CAAC,CAAAD,IAAA,CAClD,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAE5C,cAAe,CAAAe,cAAcA,CAAA,CAAG,CAC9B,KAAM,CAAEC,IAAI,CAAE,CAAEC,IAAK,CAAE,CAAC,CAAG,KAAM,CAAAhB,QAAQ,CAACiB,IAAI,CAACC,OAAO,CAAC,CAAC,CACxD,KAAM,CAAEH,IAAI,CAAEI,KAAM,CAAC,CAAG,KAAM,CAAAnB,QAAQ,CACnCoB,IAAI,CAAC,oBAAoB,CAAC,CAC1BC,MAAM,CAAC,kCAAkC,CAAC,CAC1CC,EAAE,CAAC,SAAS,CAAEN,IAAI,CAACO,EAAE,CAAC,CACtBC,KAAK,CAAC,WAAW,CAAE,CAAEC,SAAS,CAAE,IAAK,CAAC,CAAC,CAC1CZ,UAAU,CAAC,KAAK,CAAC,CACjB,GAAI,CAACM,KAAK,CAAER,QAAQ,CAACI,IAAI,EAAI,EAAE,CAAC,CAClC,CAEAjB,SAAS,CAAC,IAAM,CAAEgB,cAAc,CAAC,CAAC,CAAE,CAAC,CAAE,CAACL,WAAW,CAAC,CAAC,CAAE;AAEvD,mBACEH,KAAA,QAAAoB,QAAA,eACEtB,IAAA,OAAIuB,KAAK,CAAE,CAAEC,QAAQ,CAAC,EAAE,CAAEC,UAAU,CAAC,GAAG,CAAEC,YAAY,CAAC,CAAE,CAAE,CAAAJ,QAAA,CAAC,oBAAkB,CAAI,CAAC,CAClFd,OAAO,cAAER,IAAA,MAAAsB,QAAA,CAAG,aAAW,CAAG,CAAC,cAC1BpB,KAAA,QAAKqB,KAAK,CAAE,CAACI,OAAO,CAAC,MAAM,CAAEC,GAAG,CAAC,EAAE,CAAE,CAAAN,QAAA,EAClChB,KAAK,CAACuB,GAAG,CAACC,EAAE,eAAK9B,IAAA,CAACF,MAAM,EAAaiC,GAAG,CAAED,EAAG,EAAfA,EAAE,CAACX,EAAc,CAAE,CAAC,CAClDb,KAAK,CAAC0B,MAAM,GAAG,CAAC,eAAIhC,IAAA,MAAGuB,KAAK,CAAE,CAACU,KAAK,CAAC,SAAS,CAAE,CAAAX,QAAA,CAAC,4BAAuB,CAAG,CAAC,EAC1E,CACN,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}