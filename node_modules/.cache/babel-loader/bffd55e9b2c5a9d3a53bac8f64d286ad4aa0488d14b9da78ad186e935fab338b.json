{"ast":null,"code":"import{useState}from\"react\";import{supabase}from\"../../supabaseClient\";import Card from\"../ui/Card\";import Button from\"../ui/Button\";import AdminEventos from\"./AdminEventos\";import CheckInScanner from\"./CheckInScanner\";import ExportListas from\"./ExportListas\";import\"../../styles/global.css\";// ajusta la ruta seg√∫n donde est√© tu AdminArea.jsx\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminArea(){const[tab,setTab]=useState(\"eventos\");// eventos | checkin | export | llenos\nconst[message,setMessage]=useState(null);// üëâ Funci√≥n para registrar asistencia\nasync function registrarAsistencia(payload){try{const{reg_id}=JSON.parse(payload);// el QR trae { reg_id, event_id }\nconst{error}=await supabase.from(\"attendance\").insert({registration_id:reg_id});if(error)throw error;setMessage(\"‚úÖ Asistencia registrada con √©xito\");setTimeout(()=>setMessage(null),3000);}catch(err){console.error(err);setMessage(\"‚ùå Error al registrar asistencia\");setTimeout(()=>setMessage(null),3000);}}return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,marginBottom:8},children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setTab(\"eventos\"),children:\"Eventos\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setTab(\"checkin\"),children:\"Check-in (QR)\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setTab(\"export\"),children:\"Listas\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setTab(\"llenos\"),children:\"Eventos Llenos\"})]}),tab===\"eventos\"&&/*#__PURE__*/_jsx(AdminEventos,{}),tab===\"checkin\"&&/*#__PURE__*/_jsx(CheckInScanner,{onResult:registrarAsistencia}),tab===\"export\"&&/*#__PURE__*/_jsx(ExportListas,{}),tab===\"llenos\"&&/*#__PURE__*/_jsx(AdminEventos,{filterFull:true}),message&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12,padding:12,background:\"#f3f4f6\",borderRadius:8,fontSize:14},children:message})]});}","map":{"version":3,"names":["useState","supabase","Card","Button","AdminEventos","CheckInScanner","ExportListas","jsx","_jsx","jsxs","_jsxs","AdminArea","tab","setTab","message","setMessage","registrarAsistencia","payload","reg_id","JSON","parse","error","from","insert","registration_id","setTimeout","err","console","children","style","display","gap","marginBottom","onClick","onResult","filterFull","marginTop","padding","background","borderRadius","fontSize"],"sources":["C:/Users/Home/Documents/registro-de-eventos/src/components/Admin/AdminArea.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { supabase } from \"../../supabaseClient\";\r\nimport Card from \"../ui/Card\";\r\nimport Button from \"../ui/Button\";\r\nimport AdminEventos from \"./AdminEventos\";\r\nimport CheckInScanner from \"./CheckInScanner\";\r\nimport ExportListas from \"./ExportListas\";\r\nimport \"../../styles/global.css\"; // ajusta la ruta seg√∫n donde est√© tu AdminArea.jsx\r\n\r\nexport default function AdminArea() {\r\n  const [tab, setTab] = useState(\"eventos\"); // eventos | checkin | export | llenos\r\n  const [message, setMessage] = useState(null);\r\n\r\n  // üëâ Funci√≥n para registrar asistencia\r\n  async function registrarAsistencia(payload) {\r\n    try {\r\n      const { reg_id } = JSON.parse(payload); // el QR trae { reg_id, event_id }\r\n\r\n      const { error } = await supabase\r\n        .from(\"attendance\")\r\n        .insert({ registration_id: reg_id });\r\n\r\n      if (error) throw error;\r\n\r\n      setMessage(\"‚úÖ Asistencia registrada con √©xito\");\r\n      setTimeout(() => setMessage(null), 3000);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"‚ùå Error al registrar asistencia\");\r\n      setTimeout(() => setMessage(null), 3000);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      {/* Tabs */}\r\n      <div style={{ display: \"flex\", gap: 8, marginBottom: 8 }}>\r\n        <Button onClick={() => setTab(\"eventos\")}>Eventos</Button>\r\n        <Button onClick={() => setTab(\"checkin\")}>Check-in (QR)</Button>\r\n        <Button onClick={() => setTab(\"export\")}>Listas</Button>\r\n        <Button onClick={() => setTab(\"llenos\")}>Eventos Llenos</Button>\r\n      </div>\r\n\r\n      {/* Contenido seg√∫n tab */}\r\n      {tab === \"eventos\" && <AdminEventos />}\r\n      {tab === \"checkin\" && <CheckInScanner onResult={registrarAsistencia} />}\r\n      {tab === \"export\" && <ExportListas />}\r\n      {tab === \"llenos\" && <AdminEventos filterFull={true} />}\r\n\r\n      {/* Mensaje temporal */}\r\n      {message && (\r\n        <div\r\n          style={{\r\n            marginTop: 12,\r\n            padding: 12,\r\n            background: \"#f3f4f6\",\r\n            borderRadius: 8,\r\n            fontSize: 14,\r\n          }}\r\n        >\r\n          {message}\r\n        </div>\r\n      )}\r\n    </Card>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}