{"ast":null,"code":"import{useEffect,useState}from\"react\";import{BrowserRouter as Router,Routes,Route}from\"react-router-dom\";// 游녣 a침adimos React Router\nimport{supabase}from\"./supabaseClient\";import\"./styles/global.css\";import Card from\"./components/ui/Card\";import Button from\"./components/ui/Button\";import AuthForm from\"./components/Auth/AuthForm\";import AdminHint from\"./components/Auth/AdminHint\";import ProfileForm from\"./components/Profile/ProfileForm\";import AlumnoArea from\"./components/Alumno/AlumnoArea\";import MisRegistros from\"./components/Alumno/MisRegistros\";import AdminArea from\"./components/Admin/AdminArea\";import ForgotPasswordForm from\"./components/Auth/ForgotPasswordForm\";// 游녣 ahora dentro de Auth\nimport ResetPasswordForm from\"./components/Auth/ResetPasswordForm\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _session$user;const[session,setSession]=useState(null);const[profile,setProfile]=useState(null);const[view,setView]=useState(\"public\");const[refreshFlag,setRefreshFlag]=useState(0);// 游녢 Manejo de sesi칩n\nuseEffect(()=>{(async()=>{const{data:{session}}=await supabase.auth.getSession();setSession(session);supabase.auth.onAuthStateChange((_event,session)=>setSession(session));})();},[]);useEffect(()=>{if(!(session!==null&&session!==void 0&&session.user))return;(async()=>{const{data,error}=await supabase.from(\"profiles\").select(\"id,email,role,full_name,phone\").eq(\"id\",session.user.id).single();if(!error){setProfile(data);setView(data.role===\"admin\"?\"admin\":\"alumno\");}})();},[session===null||session===void 0?void 0:(_session$user=session.user)===null||_session$user===void 0?void 0:_session$user.id]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(ForgotPasswordForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",element:/*#__PURE__*/_jsx(ResetPasswordForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:!session?/*#__PURE__*/_jsx(\"div\",{style:{minHeight:\"100vh\",background:\"#f9fafb\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",padding:16},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:960,width:\"100%\",display:\"grid\",gap:16,gridTemplateColumns:\"1fr 1fr\"},children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:22,fontWeight:700,marginBottom:12},children:\"Registro de Talleres & Conferencias\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#6b7280\",marginBottom:12},children:\"Reg\\xEDstrate con tu correo para inscribirte a actividades con cupo, generar tu QR y pasar lista en el evento.\"}),/*#__PURE__*/_jsx(AuthForm,{})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:18,fontWeight:700,marginBottom:12},children:\"Semana Acad\\xE9mica Administraci\\xF3n y Contadur\\xEDa\"}),/*#__PURE__*/_jsx(AdminHint,{})]})]})}):/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:\"100vh\",background:\"#f9fafb\",padding:16},children:[/*#__PURE__*/_jsxs(\"header\",{style:{maxWidth:1200,margin:\"0 auto\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",marginBottom:16},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:22,fontWeight:700},children:\"Sistema de Inscripciones con QR\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:12,color:\"#6b7280\"},children:[\"Bienvenido \",(profile===null||profile===void 0?void 0:profile.full_name)||(profile===null||profile===void 0?void 0:profile.email)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8},children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setView(\"alumno\"),className:view===\"alumno\"?\"active\":\"\",children:\"Alumno\"}),(profile===null||profile===void 0?void 0:profile.role)===\"admin\"&&/*#__PURE__*/_jsx(Button,{onClick:()=>setView(\"admin\"),className:view===\"admin\"?\"active\":\"\",children:\"Admin\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>supabase.auth.signOut(),children:\"Salir\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{style:{maxWidth:1200,margin:\"0 auto\",display:\"grid\",gap:16,gridTemplateColumns:\"2fr 1fr\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:16},children:[view===\"alumno\"&&/*#__PURE__*/_jsx(AlumnoArea,{profile:profile,onInscripcion:()=>setRefreshFlag(prev=>prev+1)}),view===\"admin\"&&/*#__PURE__*/_jsx(AdminArea,{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(ProfileForm,{profile:profile,onSaved:setProfile}),/*#__PURE__*/_jsx(MisRegistros,{refreshFlag:refreshFlag})]})]})]})})]})});}","map":{"version":3,"names":["useEffect","useState","BrowserRouter","Router","Routes","Route","supabase","Card","Button","AuthForm","AdminHint","ProfileForm","AlumnoArea","MisRegistros","AdminArea","ForgotPasswordForm","ResetPasswordForm","jsx","_jsx","jsxs","_jsxs","App","_session$user","session","setSession","profile","setProfile","view","setView","refreshFlag","setRefreshFlag","data","auth","getSession","onAuthStateChange","_event","user","error","from","select","eq","id","single","role","children","path","element","style","minHeight","background","display","alignItems","justifyContent","padding","maxWidth","width","gap","gridTemplateColumns","fontSize","fontWeight","marginBottom","color","margin","full_name","email","onClick","className","signOut","onInscripcion","prev","onSaved"],"sources":["C:/Users/Home/Documents/registro-de-eventos/src/App.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\"; // 游녣 a침adimos React Router\nimport { supabase } from \"./supabaseClient\";\nimport \"./styles/global.css\";\n\nimport Card from \"./components/ui/Card\";\nimport Button from \"./components/ui/Button\";\n\nimport AuthForm from \"./components/Auth/AuthForm\";\nimport AdminHint from \"./components/Auth/AdminHint\";\nimport ProfileForm from \"./components/Profile/ProfileForm\";\nimport AlumnoArea from \"./components/Alumno/AlumnoArea\";\nimport MisRegistros from \"./components/Alumno/MisRegistros\";\nimport AdminArea from \"./components/Admin/AdminArea\";\nimport ForgotPasswordForm from \"./components/Auth/ForgotPasswordForm\"; // 游녣 ahora dentro de Auth\nimport ResetPasswordForm from \"./components/Auth/ResetPasswordForm\";\n\nexport default function App() {\n  const [session, setSession] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [view, setView] = useState(\"public\");\n  const [refreshFlag, setRefreshFlag] = useState(0);\n\n  // 游녢 Manejo de sesi칩n\n  useEffect(() => {\n    (async () => {\n      const { data: { session } } = await supabase.auth.getSession();\n      setSession(session);\n      supabase.auth.onAuthStateChange((_event, session) => setSession(session));\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (!session?.user) return;\n    (async () => {\n      const { data, error } = await supabase\n        .from(\"profiles\")\n        .select(\"id,email,role,full_name,phone\")\n        .eq(\"id\", session.user.id)\n        .single();\n      if (!error) {\n        setProfile(data);\n        setView(data.role === \"admin\" ? \"admin\" : \"alumno\");\n      }\n    })();\n  }, [session?.user?.id]);\n\n  return (\n    <Router>\n      <Routes>\n        {/* 游댳 Rutas especiales para recuperaci칩n de contrase침a */}\n        <Route path=\"/forgot-password\" element={<ForgotPasswordForm />} />\n        <Route path=\"/reset-password\" element={<ResetPasswordForm />} />\n\n        {/* 游댳 Ruta principal */}\n        <Route\n          path=\"/\"\n          element={\n            !session ? (\n              <div\n                style={{\n                  minHeight: \"100vh\",\n                  background: \"#f9fafb\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  padding: 16,\n                }}\n              >\n                <div\n                  style={{\n                    maxWidth: 960,\n                    width: \"100%\",\n                    display: \"grid\",\n                    gap: 16,\n                    gridTemplateColumns: \"1fr 1fr\",\n                  }}\n                >\n                  <Card>\n                    <h1\n                      style={{\n                        fontSize: 22,\n                        fontWeight: 700,\n                        marginBottom: 12,\n                      }}\n                    >\n                      Registro de Talleres & Conferencias\n                    </h1>\n                    <p style={{ color: \"#6b7280\", marginBottom: 12 }}>\n                      Reg칤strate con tu correo para inscribirte a actividades\n                      con cupo, generar tu QR y pasar lista en el evento.\n                    </p>\n                    <AuthForm />\n                  </Card>\n                  <Card>\n                    <h2\n                      style={{\n                        fontSize: 18,\n                        fontWeight: 700,\n                        marginBottom: 12,\n                      }}\n                    >\n                      Semana Acad칠mica Administraci칩n y Contadur칤a\n                    </h2>\n                    <AdminHint />\n                  </Card>\n                </div>\n              </div>\n            ) : (\n              <div\n                style={{ minHeight: \"100vh\", background: \"#f9fafb\", padding: 16 }}\n              >\n                <header\n                  style={{\n                    maxWidth: 1200,\n                    margin: \"0 auto\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"space-between\",\n                    marginBottom: 16,\n                  }}\n                >\n                  <div>\n                    <h1 style={{ fontSize: 22, fontWeight: 700 }}>\n                      Sistema de Inscripciones con QR\n                    </h1>\n                    <p style={{ fontSize: 12, color: \"#6b7280\" }}>\n                      Bienvenido {profile?.full_name || profile?.email}\n                    </p>\n                  </div>\n                  <div style={{ display: \"flex\", gap: 8 }}>\n                    <Button\n                      onClick={() => setView(\"alumno\")}\n                      className={view === \"alumno\" ? \"active\" : \"\"}\n                    >\n                      Alumno\n                    </Button>\n                    {profile?.role === \"admin\" && (\n                      <Button\n                        onClick={() => setView(\"admin\")}\n                        className={view === \"admin\" ? \"active\" : \"\"}\n                      >\n                        Admin\n                      </Button>\n                    )}\n                    <Button onClick={() => supabase.auth.signOut()}>\n                      Salir\n                    </Button>\n                  </div>\n                </header>\n\n                <main\n                  style={{\n                    maxWidth: 1200,\n                    margin: \"0 auto\",\n                    display: \"grid\",\n                    gap: 16,\n                    gridTemplateColumns: \"2fr 1fr\",\n                  }}\n                >\n                  <div style={{ display: \"grid\", gap: 16 }}>\n                    {view === \"alumno\" && (\n                      <AlumnoArea\n                        profile={profile}\n                        onInscripcion={() =>\n                          setRefreshFlag((prev) => prev + 1)\n                        }\n                      /> \n                    )}\n                    {view === \"admin\" && <AdminArea />}\n                  </div>\n                  \n                  <div className=\"space-y-6\">\n                    <ProfileForm profile={profile} onSaved={setProfile} />\n                    <MisRegistros refreshFlag={refreshFlag} />\n                  </div>\n                </main>\n              </div>\n            )\n          }\n        />\n      </Routes>\n    </Router>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}