{"ast":null,"code":"import{useState,useEffect}from\"react\";import{supabase}from\"../../supabaseClient\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResetPasswordForm(){const[password,setPassword]=useState(\"\");const[confirm,setConfirm]=useState(\"\");const[message,setMessage]=useState(null);const[success,setSuccess]=useState(false);const navigate=useNavigate();async function handleSubmit(e){e.preventDefault();setMessage(null);if(password!==confirm){setMessage(\"❌ Las contraseñas no coinciden\");return;}const{error}=await supabase.auth.updateUser({password});if(error){setMessage(\"\\u274C Error: \".concat(error.message));}else{setMessage(\"✅ Contraseña actualizada con éxito, serás redirigido al inicio...\");setSuccess(true);}}// ⏳ Redirigir después de 4 segundos si la actualización fue exitosa\nuseEffect(()=>{if(success){const timer=setTimeout(()=>{navigate(\"/\");},4000);return()=>clearTimeout(timer);}},[success,navigate]);return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{maxWidth:400,margin:\"0 auto\",padding:20},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ingresa tu nueva contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Nueva contrase\\xF1a\",value:password,onChange:e=>setPassword(e.target.value),required:true,style:{width:\"100%\",padding:8,marginBottom:10}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirmar contrase\\xF1a\",value:confirm,onChange:e=>setConfirm(e.target.value),required:true,style:{width:\"100%\",padding:8,marginBottom:10}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:\"100%\",padding:10,background:\"#16a34a\",color:\"#fff\",border:\"none\",borderRadius:8,cursor:\"pointer\"},children:\"Guardar nueva contrase\\xF1a\"}),message&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:10},children:message})]});}","map":{"version":3,"names":["useState","useEffect","supabase","useNavigate","jsx","_jsx","jsxs","_jsxs","ResetPasswordForm","password","setPassword","confirm","setConfirm","message","setMessage","success","setSuccess","navigate","handleSubmit","e","preventDefault","error","auth","updateUser","concat","timer","setTimeout","clearTimeout","onSubmit","style","maxWidth","margin","padding","children","type","placeholder","value","onChange","target","required","width","marginBottom","background","color","border","borderRadius","cursor","marginTop"],"sources":["C:/Users/Home/Documents/registro-de-eventos/src/components/Auth/ResetPasswordForm.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"../../supabaseClient\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function ResetPasswordForm() {\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [message, setMessage] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setMessage(null);\r\n\r\n    if (password !== confirm) {\r\n      setMessage(\"❌ Las contraseñas no coinciden\");\r\n      return;\r\n    }\r\n\r\n    const { error } = await supabase.auth.updateUser({ password });\r\n\r\n    if (error) {\r\n      setMessage(`❌ Error: ${error.message}`);\r\n    } else {\r\n      setMessage(\"✅ Contraseña actualizada con éxito, serás redirigido al inicio...\");\r\n      setSuccess(true);\r\n    }\r\n  }\r\n\r\n  // ⏳ Redirigir después de 4 segundos si la actualización fue exitosa\r\n  useEffect(() => {\r\n    if (success) {\r\n      const timer = setTimeout(() => {\r\n        navigate(\"/\");\r\n      }, 4000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [success, navigate]);\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      style={{ maxWidth: 400, margin: \"0 auto\", padding: 20 }}\r\n    >\r\n      <h3>Ingresa tu nueva contraseña</h3>\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Nueva contraseña\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        required\r\n        style={{ width: \"100%\", padding: 8, marginBottom: 10 }}\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Confirmar contraseña\"\r\n        value={confirm}\r\n        onChange={(e) => setConfirm(e.target.value)}\r\n        required\r\n        style={{ width: \"100%\", padding: 8, marginBottom: 10 }}\r\n      />\r\n      <button\r\n        type=\"submit\"\r\n        style={{\r\n          width: \"100%\",\r\n          padding: 10,\r\n          background: \"#16a34a\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: 8,\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Guardar nueva contraseña\r\n      </button>\r\n      {message && <p style={{ marginTop: 10 }}>{message}</p>}\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}